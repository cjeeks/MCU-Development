C51 COMPILER V9.54   DOT_MATRIX                                                            10/13/2015 11:38:08 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE DOT_MATRIX
OBJECT MODULE PLACED IN Dot_Matrix.obj
COMPILER INVOKED BY: C:\Keil_c51\C51\BIN\C51.EXE DotMatrix\Dot_Matrix.c LARGE OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEN
                    -D PRINT(.\Dot_Matrix.lst) TABS(2) OBJECT(Dot_Matrix.obj)

line level    source

   1          #include "Dot_Matrix.h"
*** WARNING C317 IN LINE 26 OF DotMatrix\Dot_Matrix.h: attempt to redefine macro 'A_ONOFF'
   2          
   3          const unsigned char ziku_table[]={
   4            
   5          0xFF,0xF7,0x80,0xF5,0xEB,0xF5,0xEB,0xC1,0x80,0xF5,0xAA,0xF6,0xAA,0xF7,0xAA,0x80,
   6          0x8A,0xFF,0xBC,0xFF,0xBE,0xC1,0x80,0xDD,0xBE,0xDD,0xBE,0xDD,0x80,0xC1,0xBE,0xDD,/*"?",0*/
   7          
   8          0xFF,0xFF,0xFB,0x7F,0x1B,0x7E,0xDB,0x7E,0xDB,0xBE,0xDB,0xBE,0x00,0xD0,0xDB,0xEE,
   9          0xDB,0xD6,0xDB,0xBA,0x1B,0x7E,0xFB,0x7F,0xF8,0xFF,0x07,0x00,0x9F,0xFF,0x7F,0xFF,/*"?",2*/
  10          
  11          0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x01,0x80,0xDD,0x7D,0xDD,0xBD,0xDD,0xFD,0xDD,0xFD,
  12          0x01,0x80,0xDD,0xFD,0xDD,0xFD,0xDD,0xFD,0xDD,0xFD,0x01,0xE0,0xFF,0x9F,0xFF,0x7F,/*"?",3*/
  13          
  14          0xFF,0xFF,0xC7,0xE3,0xF7,0xDD,0xF7,0xDE,0xF7,0xDE,0x77,0xDF,0x8F,0xC7,0xFF,0xFF,/*"S",4*/
  15          
  16          0xFF,0xFF,0xE7,0xFF,0xF7,0xFF,0xF7,0xDF,0x07,0xC0,0xF7,0xDF,0xF7,0xFF,0xE7,0xFF,/*"T",5*/
  17          
  18          0xFF,0xFF,0xF7,0xDF,0x07,0xC0,0x07,0xFF,0xFF,0xC0,0x07,0xFF,0x07,0xC0,0xF7,0xDF,/*"M",6*/
  19          
  20          0xFF,0xFF,0xCF,0xF1,0xB7,0xEE,0x77,0xDF,0x77,0xDF,0xF7,0xDF,0xCF,0xE7,0xFF,0xFF,/*"3",7*/
  21          
  22          0xFF,0xFF,0x8F,0xCF,0x77,0xDE,0xF7,0xDD,0xF7,0xDB,0xF7,0xD7,0x8F,0xCF,0xFF,0xFF,/*"2",8*/
  23          
  24          0xFF,0xFF,0xEF,0xFF,0xF7,0xFF,0x17,0xFC,0x77,0xFF,0x77,0xDF,0x07,0xC0,0xF7,0xDF,/*"F",9*/
  25          
  26          0xFF,0xFF,0xFF,0xDB,0x07,0xC0,0xEF,0xDB,0xDF,0xDB,0x3F,0xFB,0xFF,0xF8,0xFF,0xFF,/*"4",10*/
  27          
  28          0xFF,0xFF,0x1F,0xF0,0xEF,0xEF,0xF7,0xDF,0xF7,0xDF,0xEF,0xEF,0x1F,0xF0,0xFF,0xFF,/*"0",11*/
  29          
  30          0xFF,0xFF,0xF7,0xFF,0xC7,0xFF,0x37,0xFF,0xF7,0xC0,0xF7,0xFF,0xC7,0xFF,0xFF,0xFF,/*"7",12*/
  31          
  32          0xFF,0xFF,0x3F,0x7F,0xBF,0xBE,0xB1,0xCF,0xB7,0xF0,0x87,0xCF,0x77,0xBF,0xF7,0x7E,
  33          0x70,0xFF,0x17,0x80,0x77,0xDB,0x77,0xDB,0x77,0xDB,0x11,0x80,0x7F,0xFF,0x7F,0xFF,/*"?",13*/
  34          
  35          0xFF,0xFF,0xFF,0x7F,0xFF,0x7F,0xFF,0xBF,0xFF,0xCF,0xFF,0xF3,0xFF,0xFC,0x1F,0xFF,
  36          0xE3,0xFF,0x1D,0xFF,0xFE,0xFC,0xFF,0xF3,0xFF,0xEF,0xFF,0xDF,0xFF,0xBF,0xFF,0x7F,/*"?",14*/
  37          
  38          0xFF,0xFF,0xEF,0x07,0xE9,0xBF,0xEE,0xDF,0xEF,0xEF,0xEF,0xF3,0x00,0xFC,0xEF,0xFF,
  39          0xEF,0xEF,0x6F,0xEF,0x6F,0xEF,0x6F,0xC0,0x6F,0xDF,0x6F,0x9F,0xEF,0xDF,0xEF,0xFF,/*"?",15*/
  40          
  41          0xFF,0xFF,0x7F,0xFF,0x7D,0xFF,0x7D,0xFF,0x7D,0xFF,0x01,0x00,0x7D,0xFF,0x7D,0xFF,
  42          0x7D,0xFF,0x7D,0xFF,0x7D,0xFF,0x01,0xF0,0x7D,0xCF,0x7D,0xBF,0x7D,0x7F,0x7F,0xFF,/*"?",16*/
  43          
  44          0xFF,0xFF,0xFF,0x7F,0xEF,0x7F,0x6B,0xBC,0x6D,0xBB,0x6F,0xD7,0x6F,0xEF,0x6F,0xD7,
  45          0x68,0xB9,0x47,0xBE,0x2F,0x7F,0xEF,0x7C,0xE9,0x73,0xE7,0xEF,0xFF,0xDF,0xFF,0xFF,/*"?",17*/
  46          
  47          0xFF,0xFF,0xFF,0xFE,0xFD,0xFE,0xFD,0xFE,0xCD,0xFE,0xBD,0xFE,0xFD,0xFE,0xFD,0xFE,
  48          0x01,0x00,0xFD,0xFE,0xFD,0xFE,0x9D,0xFE,0xED,0xFE,0xFD,0xFE,0xFD,0xFE,0xFF,0xFE,/*"?",18*/
  49          
  50          0xFF,0xFF,0xFF,0xFF,0x3F,0xFF,0x9F,0xFF,0xAF,0x01,0xB7,0xBD,0xBF,0xBD,0xBF,0xBD,
  51          0xBF,0xBD,0xBC,0xBD,0xBB,0xBD,0xB7,0xBD,0xAF,0x01,0x1F,0xFF,0xBF,0xFF,0xFF,0xFF,/*"?",19*/
  52          };
  53          
C51 COMPILER V9.54   DOT_MATRIX                                                            10/13/2015 11:38:08 PAGE 2   

  54          static u8 read_value_dot = 0;
  55          
  56          void ABCD_port(u8 dat)
  57          {
  58   1        if((dat&0x01)==0x00)    
  59   1          {
  60   2             //A_ONOFF(Bit_RESET);
  61   2             read_value_dot = PCF8574_Single_ReadI2C(UF_PCF8574_SlaveAddress);
  62   2             PCF8574_Single_WriteI2C(UF_PCF8574_SlaveAddress,(~(1 << 5)) & read_value_dot);
  63   2          }
  64   1        else 
  65   1          {
  66   2            //A_ONOFF(Bit_SET);
  67   2             read_value_dot = PCF8574_Single_ReadI2C(UF_PCF8574_SlaveAddress);
  68   2             PCF8574_Single_WriteI2C(UF_PCF8574_SlaveAddress,(1 << 5) | read_value_dot);
  69   2          }
  70   1        if((dat&0x02)==0x00)
  71   1        {
  72   2            //B_ONOFF(Bit_RESET);
  73   2             read_value_dot = PCF8574_Single_ReadI2C(UF_PCF8574_SlaveAddress);
  74   2             PCF8574_Single_WriteI2C(UF_PCF8574_SlaveAddress,(~(1 << 7)) & read_value_dot); 
  75   2        }
  76   1        else 
  77   1        {
  78   2          //B_ONOFF(Bit_SET);
  79   2             read_value_dot = PCF8574_Single_ReadI2C(UF_PCF8574_SlaveAddress);
  80   2             PCF8574_Single_WriteI2C(UF_PCF8574_SlaveAddress,(1 << 7) | read_value_dot);
  81   2        }
  82   1        if((dat&0x04)==0x00)
  83   1        {
  84   2          //C_ONOFF(Bit_RESET);
  85   2             read_value_dot = PCF8574_Single_ReadI2C(UF_PCF8574_SlaveAddress);
  86   2             PCF8574_Single_WriteI2C(UG_PCF8574_SlaveAddress,(~(1 << 0)) & read_value_dot);   
  87   2        }
  88   1        else 
  89   1        {
  90   2        //C_ONOFF(Bit_SET);
  91   2             read_value_dot = PCF8574_Single_ReadI2C(UF_PCF8574_SlaveAddress);
  92   2             PCF8574_Single_WriteI2C(UG_PCF8574_SlaveAddress,(1 << 0) | read_value_dot);    
  93   2        }
  94   1        if((dat&0x08)==0x00)
  95   1        {
  96   2          //D_ONOFF(Bit_RESET);
  97   2             read_value_dot = PCF8574_Single_ReadI2C(UF_PCF8574_SlaveAddress);
  98   2             PCF8574_Single_WriteI2C(UF_PCF8574_SlaveAddress,(~(1 << 4)) & read_value_dot); 
  99   2        }
 100   1        else 
 101   1        {
 102   2        //D_ONOFF(Bit_SET);
 103   2             read_value_dot = PCF8574_Single_ReadI2C(UF_PCF8574_SlaveAddress);
 104   2             PCF8574_Single_WriteI2C(UF_PCF8574_SlaveAddress,(1 << 4) | read_value_dot);
 105   2        }
 106   1      }
 107          
 108          void Dot_Matrix_test(void)
 109          {
 110   1        
 111   1        u8  i,j;
 112   1        //u8 i;
 113   1        u8 data_buff;
 114   1        u8 hanzi;
 115   1      //  u8 han;
C51 COMPILER V9.54   DOT_MATRIX                                                            10/13/2015 11:38:08 PAGE 3   

 116   1        u8 shift=1; 
 117   1        
 118   1        //PCF8574_Single_WriteI2C(UG_PCF8574_SlaveAddress,0);
 119   1        //PCF8574_Single_WriteI2C(UF_PCF8574_SlaveAddress,0);
 120   1            
 121   1        for(shift=0;shift<16;shift++){  
 122   2      
 123   2            //LAT_ONOFF(Bit_RESET);         //PG3
 124   2             read_value_dot = PCF8574_Single_ReadI2C(UF_PCF8574_SlaveAddress);
 125   2             PCF8574_Single_WriteI2C(UG_PCF8574_SlaveAddress,(~(1 << 3)) & read_value_dot);
 126   2      
 127   2            //DCLK_ONOFF(Bit_RESET);        //PG1
 128   2             read_value_dot = PCF8574_Single_ReadI2C(UF_PCF8574_SlaveAddress);
 129   2             PCF8574_Single_WriteI2C(UG_PCF8574_SlaveAddress,(~(1 << 1)) & read_value_dot);
 130   2      
 131   2            //74HC595那?3?那y?YHzk16
 132   2            data_buff = ziku_table[hanzi*32+shift*2+1];
 133   2            for(i=0;i<8;i++){
 134   3              if((data_buff&0x80)!=0) 
 135   3              {
 136   4                //DI_ONOFF(Bit_SET);//DA_in_port = 1;   PF2
 137   4                  read_value_dot = PCF8574_Single_ReadI2C(UF_PCF8574_SlaveAddress);
 138   4                  PCF8574_Single_WriteI2C(UF_PCF8574_SlaveAddress,(1 << 2) | read_value_dot);     
 139   4              }
 140   3              else 
 141   3              {
 142   4                //DI_ONOFF(Bit_RESET);//DA_in_port = 0;
 143   4                read_value_dot = PCF8574_Single_ReadI2C(UF_PCF8574_SlaveAddress);
 144   4                  PCF8574_Single_WriteI2C(UF_PCF8574_SlaveAddress,(~(1 << 2)) & read_value_dot);
 145   4              }
 146   3              //DCLK_ONOFF(Bit_SET);//CLK_port = 1;               PG1
 147   3                read_value_dot = PCF8574_Single_ReadI2C(UF_PCF8574_SlaveAddress);
 148   3                PCF8574_Single_WriteI2C(UG_PCF8574_SlaveAddress,(1 << 1) | read_value_dot);
 149   3              
 150   3              //DCLK_ONOFF(Bit_RESET);//CLK_port = 0;             PG1
 151   3                read_value_dot = PCF8574_Single_ReadI2C(UF_PCF8574_SlaveAddress);
 152   3                PCF8574_Single_WriteI2C(UG_PCF8574_SlaveAddress,(~(1 << 1)) & read_value_dot);
 153   3              data_buff <<= 1;
 154   3              }
 155   2              data_buff = ziku_table[hanzi*32+shift*2];
 156   2              for(i=0;i<8;i++)
 157   2              {
 158   3              if((data_buff&0x01)!=0) 
 159   3              {
 160   4                //DI_ONOFF(Bit_SET);//DA_in_port = 1;
 161   4                  read_value_dot = PCF8574_Single_ReadI2C(UF_PCF8574_SlaveAddress);
 162   4                  PCF8574_Single_WriteI2C(UF_PCF8574_SlaveAddress,(1 << 2) | read_value_dot);           
 163   4              }
 164   3              else 
 165   3              {
 166   4                //DI_ONOFF(Bit_RESET);//DA_in_port = 0;
 167   4                read_value_dot = PCF8574_Single_ReadI2C(UF_PCF8574_SlaveAddress);
 168   4                  PCF8574_Single_WriteI2C(UF_PCF8574_SlaveAddress,(~(1 << 2)) & read_value_dot);        
 169   4              }
 170   3              //DCLK_ONOFF(Bit_SET);//CLK_port = 1;
 171   3                read_value_dot = PCF8574_Single_ReadI2C(UF_PCF8574_SlaveAddress);
 172   3                PCF8574_Single_WriteI2C(UG_PCF8574_SlaveAddress,(1 << 1) | read_value_dot);
 173   3      
 174   3              //DCLK_ONOFF(Bit_RESET);//CLK_port = 0;
 175   3                read_value_dot = PCF8574_Single_ReadI2C(UF_PCF8574_SlaveAddress);
 176   3                PCF8574_Single_WriteI2C(UG_PCF8574_SlaveAddress,(~(1 << 1)) & read_value_dot);
 177   3      
C51 COMPILER V9.54   DOT_MATRIX                                                            10/13/2015 11:38:08 PAGE 4   

 178   3              data_buff >>= 1;
 179   3              }
 180   2       
 181   2            //G_ONOFF(Bit_SET);//EN_port = 1;                      PF0
 182   2                read_value_dot = PCF8574_Single_ReadI2C(UF_PCF8574_SlaveAddress);
 183   2                PCF8574_Single_WriteI2C(UF_PCF8574_SlaveAddress,(1 << 0) | read_value_dot);
 184   2            
 185   2            ABCD_port(shift);//ABCD_port = (ABCD_port & 0x0f)|(han<<4);  //HC138辰???那?3?
 186   2            //ABCD_port(han);//ABCD_port = (ABCD_port & 0x0f)|(han<<4);  //HC138辰???那?3?
 187   2      
 188   2            //LAT_ONOFF(Bit_SET);//Latch_port = 1; //?那D赤HC595那y?Y那?3?米?Q1-Q8???迆
 189   2             read_value_dot = PCF8574_Single_ReadI2C(UF_PCF8574_SlaveAddress);
 190   2             PCF8574_Single_WriteI2C(UG_PCF8574_SlaveAddress,(1 << 3) | read_value_dot);
 191   2      
 192   2            //G_ONOFF(Bit_RESET);//EN_port = 0;    //HC138那?3?車DD∫㏒?∩辰?a??那?
 193   2                read_value_dot = PCF8574_Single_ReadI2C(UF_PCF8574_SlaveAddress);
 194   2                PCF8574_Single_WriteI2C(UF_PCF8574_SlaveAddress,(~(1 << 0)) & read_value_dot);
 195   2      
 196   2      
 197   2            //LAT_ONOFF(Bit_RESET);//Latch_port = 0;  //???“HC595那y?Y那?3?
 198   2             read_value_dot = PCF8574_Single_ReadI2C(UF_PCF8574_SlaveAddress);
 199   2             PCF8574_Single_WriteI2C(UG_PCF8574_SlaveAddress,(~(1 << 3)) & read_value_dot);
 200   2        }
 201   1        
 202   1      }
*** WARNING C280 IN LINE 111 OF DotMatrix\Dot_Matrix.c: 'j': unreferenced local variable
 203            


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    580    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =    465       6
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  2 WARNING(S),  0 ERROR(S)
